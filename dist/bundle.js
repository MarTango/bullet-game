!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"Bullet",(function(){return i}));var r=({board:t,keysPressed:e,...n})=>{const r=.2,o={w:{vy:r},a:{vx:-r},s:{vy:-r},d:{vx:r}},i=Array.from(e).filter(t=>t in o),a=t.entities.filter(t=>t.id).map(t=>i.map(t=>o[t]).reduce((t,e)=>({...t,...e}),{...t,vx:0,vy:0}));return{board:{...t,entities:[...a,...t.entities.filter(t=>!t.id)]},keysPressed:e,...n}},o=({board:t,click:e,...n})=>{if(!e)return{...n,board:t};const{x:r,y:o}=e,a=t.entities.filter(t=>t.id).map(t=>{const e=r-t.x,n=o-t.y,a=Math.sqrt(e*e+n*n),c=e/a,s=n/a,u=t.r+2+2;return i(t.x+u*c,t.y+u*s,.4*c,.4*s)});return{...n,click:e,board:{...t,entities:[...t.entities,...a]}}};function i(t,e,n,r){return{r:3,color:"black",x:t,y:e,vx:n,vy:r}}const a=function*(){const t=new Set;for(window.addEventListener("keydown",e=>{const n=e.key.toLowerCase();t.has(n)||t.add(n)}),window.addEventListener("keyup",e=>{const n=e.key.toLowerCase();t.has(n)&&t.delete(n)});;)yield t}(),c=function*(){let t=Date.now();for(;;){let e=Date.now();const n=e-t;t=e,yield n}}();!function(){let t=function(){const t=document.querySelector("canvas"),e=t.getContext("2d"),{width:n,height:r}=t,o=[{id:1,x:Math.random()*n,y:Math.random()*r,r:10,vx:0,vy:0,color:"red"}];return{ctx:e,entities:o}}();const e=t=>o(r(function({board:t,...e}){return{...e,board:{...t,entities:t.entities.filter((e,n)=>0==t.entities.filter((t,r)=>n!=r&&Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(e.r+t.r,2)).length)}}}(function({board:t,...e}){const{width:n,height:r}=t.ctx.canvas;return{...e,board:{...t,entities:t.entities.map(({vx:t,vy:e,...o})=>({...o,x:o.x<0?0:o.x>n?n:o.x,y:o.y<0?0:o.y>r?n:o.y,vx:o.x-o.r<0?Math.abs(t):o.x+o.r>n?-Math.abs(t):t,vy:o.y-o.r<0?Math.abs(e):o.y+o.r>r?-Math.abs(e):e}))}}}(function({dt:t=0,board:e,...n}){return{...n,dt:t,board:{...e,entities:e.entities.map(e=>({...e,x:e.x+e.vx*t,y:e.y+e.vy*t}))}}}(t))))),n=function*(){const e=[];for(window.addEventListener("mousedown",({offsetX:n,offsetY:r})=>{e.push({x:n,y:t.ctx.canvas.height-r})});;)yield e.pop()}();requestAnimationFrame((async function r(){await new Promise((t,e)=>setTimeout(t,10));const o={board:t,dt:c.next().value,keysPressed:a.next().value,click:n.next().value};t=e(o).board,function(t){const{height:e,width:n}=t.ctx.canvas;t.ctx.clearRect(0,0,n,e),t.entities.forEach(n=>{t.ctx.beginPath(),t.ctx.arc(n.x,e-n.y,n.r,0,2*Math.PI),t.ctx.fillStyle=n.color,t.ctx.fill(),t.ctx.closePath()})}(t),requestAnimationFrame(r)}))}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vdmVtZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImJvYXJkIiwia2V5c1ByZXNzZWQiLCJyZXN0IiwidiIsIm1hcHBpbmciLCJ3IiwidnkiLCJhIiwidngiLCJrZXlzIiwiQXJyYXkiLCJmcm9tIiwiZmlsdGVyIiwiayIsInBsYXllcnMiLCJlbnRpdGllcyIsImUiLCJpZCIsIm1hcCIsInJlZHVjZSIsInByZXYiLCJjdXIiLCJjbGljayIsIm1zZyIsIngiLCJteCIsInkiLCJteSIsImJ1bGxldHMiLCJyZWx4IiwicmVseSIsIm1hZ25pdHVkZSIsIk1hdGgiLCJzcXJ0IiwiQnVsbGV0IiwiY29sb3IiLCJrZXlzUHJlc3NlZFN0cmVhbSIsIlNldCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0b0xvd2VyQ2FzZSIsImhhcyIsImFkZCIsImRlbGV0ZSIsImR0U3RyZWFtIiwiRGF0ZSIsIm5vdyIsIm5leHQiLCJkdCIsImNhbnZhcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImN0eCIsImdldENvbnRleHQiLCJ3aWR0aCIsImhlaWdodCIsImgiLCJyYW5kb20iLCJpbml0IiwidXBkYXRlIiwibW92ZW1lbnQiLCJiMSIsImIyIiwiaiIsInBvdyIsImxlbmd0aCIsImFmdGVyQ29sbGlzaW9ucyIsImIiLCJhYnMiLCJhZnRlckJvdW5jaW5nIiwiYWZ0ZXJUaW1lU3RlcCIsImNsaWNrU3RyZWFtIiwicXVldWUiLCJvZmZzZXRYIiwib2Zmc2V0WSIsInB1c2giLCJwb3AiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhc3luYyIsImZyYW1lIiwiUHJvbWlzZSIsIl8iLCJzZXRUaW1lb3V0IiwiY2xlYXJSZWN0IiwiZm9yRWFjaCIsImJlZ2luUGF0aCIsImFyYyIsIlBJIiwiZmlsbFN0eWxlIiwiZmlsbCIsImNsb3NlUGF0aCIsImRpc3BsYXkiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFT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RUFBR2tELGNBQ2xERixFQUFNRyxLQUFLLENBQUVuRCxJQUFHRSxFQUFHMUIsRUFBTW9ELElBQUlILE9BQU9NLE9BQVNtQixjQUd2Q0YsRUFBTUksTUFOSSxHQVVwQkMsdUJBQXNCQyxlQUFlQyxVQUM3QixJQUFJQyxRQUFRLENBQUNsRyxFQUFHbUcsSUFBTUMsV0FBV3BHLEVBQUcsS0FFMUMsTUFBTXlDLEVBQVcsQ0FDZnZCLFFBQ0FnRCxHQUFJSixFQUFTRyxPQUFPOUQsTUFDcEJnQixZQUFhbUMsRUFBa0JXLE9BQU85RCxNQUN0Q3FDLE1BQU9pRCxFQUFZeEIsT0FBTzlELE9BRTVCZSxFQUFRMkQsRUFBT3BDLEdBQUt2QixNQStFeEIsU0FBaUJELEdBQ2YsTUFBUXdELE9BQVFDLEVBQUdGLE1BQU9qRCxHQUFNTixFQUFFcUQsSUFBSUgsT0FDdENsRCxFQUFFcUQsSUFBSStCLFVBQVUsRUFBRyxFQUFHOUUsRUFBR21ELEdBQ3pCekQsRUFBRWdCLFNBQVNxRSxRQUFTakIsSUFDbEJwRSxFQUFFcUQsSUFBSWlDLFlBQ050RixFQUFFcUQsSUFBSWtDLElBQUluQixFQUFFM0MsRUFBR2dDLEVBQUlXLEVBQUV6QyxFQUFHeUMsRUFBRXJGLEVBQUcsRUFBRyxFQUFJa0QsS0FBS3VELElBQ3pDeEYsRUFBRXFELElBQUlvQyxVQUFZckIsRUFBRWhDLE1BQ3BCcEMsRUFBRXFELElBQUlxQyxPQUNOMUYsRUFBRXFELElBQUlzQyxjQXRGTkMsQ0FBUTNGLEdBQ1I2RSxzQkFBc0JFLE1BaEMxQiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBFbnRpdHksIEJ1bGxldCwgTXNnIH0gZnJvbSBcIi4vaW5kZXhcIjtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBhZnRlcktleXNQcmVzc2VkOiAoeyBib2FyZCwga2V5c1ByZXNzZWQsIC4uLnJlc3QgfTogTXNnKTogTXNnID0+IHtcbiAgICBjb25zdCB2ID0gMC4yO1xuXG4gICAgLyoqXG4gICAgICogTWFwIGZyb20ga2V5IHRvIHBhcnRpYWwgRW50aXR5XG4gICAgICovXG4gICAgY29uc3QgbWFwcGluZzogeyBbczogc3RyaW5nXTogUGFydGlhbDxFbnRpdHk+IH0gPSB7XG4gICAgICB3OiB7IHZ5OiB2IH0sXG4gICAgICBhOiB7IHZ4OiAtdiB9LFxuICAgICAgczogeyB2eTogLXYgfSxcbiAgICAgIGQ6IHsgdng6IHYgfSxcbiAgICB9O1xuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IGtleXM6IChrZXlvZiB0eXBlb2YgbWFwcGluZylbXSA9IEFycmF5LmZyb20oa2V5c1ByZXNzZWQpLmZpbHRlcihcbiAgICAgIChrKSA9PiBrIGluIG1hcHBpbmdcbiAgICApO1xuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IHBsYXllcnM6IEVudGl0eVtdID0gYm9hcmQuZW50aXRpZXNcbiAgICAgIC5maWx0ZXIoKGUpID0+IGUuaWQpXG4gICAgICAubWFwKChwKSA9PlxuICAgICAgICBrZXlzXG4gICAgICAgICAgLm1hcCgoaykgPT4gbWFwcGluZ1trXSlcbiAgICAgICAgICAucmVkdWNlKFxuICAgICAgICAgICAgKHByZXY6IEVudGl0eSwgY3VyKSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgICAgICAuLi5jdXIsXG4gICAgICAgICAgICAgIH0gYXMgRW50aXR5O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgLi4ucCwgdng6IDAsIHZ5OiAwIH1cbiAgICAgICAgICApXG4gICAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGJvYXJkOiB7XG4gICAgICAgIC4uLmJvYXJkLFxuICAgICAgICBlbnRpdGllczogWy4uLnBsYXllcnMsIC4uLmJvYXJkLmVudGl0aWVzLmZpbHRlcigoZSkgPT4gIWUuaWQpXSxcbiAgICAgIH0sXG4gICAgICBrZXlzUHJlc3NlZCxcbiAgICAgIC4uLnJlc3QsXG4gICAgfTtcbiAgfSxcbiAgYWZ0ZXJNb3VzZURvd246ICh7IGJvYXJkLCBjbGljaywgLi4ubXNnIH06IE1zZyk6IE1zZyA9PiB7XG4gICAgaWYgKCFjbGljaykge1xuICAgICAgcmV0dXJuIHsgLi4ubXNnLCBib2FyZCB9O1xuICAgIH1cbiAgICBjb25zdCB7IHg6IG14LCB5OiBteSB9ID0gY2xpY2s7XG4gICAgY29uc3QgcGxheWVycyA9IGJvYXJkLmVudGl0aWVzLmZpbHRlcigoZSkgPT4gZS5pZCk7XG5cbiAgICBjb25zdCBidWxsZXRzID0gcGxheWVycy5tYXAoKHApID0+IHtcbiAgICAgIGNvbnN0IHJlbHggPSBteCAtIHAueDtcbiAgICAgIGNvbnN0IHJlbHkgPSBteSAtIHAueTtcbiAgICAgIGNvbnN0IG1hZ25pdHVkZSA9IE1hdGguc3FydChyZWx4ICogcmVseCArIHJlbHkgKiByZWx5KTtcblxuICAgICAgY29uc3QgdiA9IDAuNDtcbiAgICAgIGNvbnN0IHZ4ID0gcmVseCAvIG1hZ25pdHVkZTtcbiAgICAgIGNvbnN0IHZ5ID0gcmVseSAvIG1hZ25pdHVkZTtcblxuICAgICAgY29uc3QgciA9IHAuciArIDIgKyAyO1xuXG4gICAgICByZXR1cm4gQnVsbGV0KHAueCArIHIgKiB2eCwgcC55ICsgciAqIHZ5LCB2ICogdngsIHYgKiB2eSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4ubXNnLFxuICAgICAgY2xpY2ssXG4gICAgICBib2FyZDogeyAuLi5ib2FyZCwgZW50aXRpZXM6IFsuLi5ib2FyZC5lbnRpdGllcywgLi4uYnVsbGV0c10gfSxcbiAgICB9O1xuICB9LFxufTtcbiIsImltcG9ydCBtb3ZlbWVudCBmcm9tIFwiLi9tb3ZlbWVudFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlIHtcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gIGVudGl0aWVzOiBFbnRpdHlbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbnRpdHkge1xuICBpZD86IG51bWJlcjtcbiAgcjogbnVtYmVyO1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcbiAgdng6IG51bWJlcjtcbiAgdnk6IG51bWJlcjtcbiAgY29sb3I6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIENsaWNrIHtcbiAgeDogbnVtYmVyO1xuICB5OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTXNnIHtcbiAgYm9hcmQ6IFN0YXRlO1xuICBkdD86IG51bWJlcjtcbiAga2V5c1ByZXNzZWQ/OiBTZXQ8c3RyaW5nPjtcbiAgY2xpY2s/OiBDbGljaztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEJ1bGxldCh4OiBudW1iZXIsIHk6IG51bWJlciwgdng6IG51bWJlciwgdnk6IG51bWJlcik6IEVudGl0eSB7XG4gIHJldHVybiB7XG4gICAgcjogMyxcbiAgICBjb2xvcjogXCJibGFja1wiLFxuICAgIHgsXG4gICAgeSxcbiAgICB2eCxcbiAgICB2eSxcbiAgfTtcbn1cblxuY29uc3Qga2V5c1ByZXNzZWRTdHJlYW06IEl0ZXJhdG9yPFNldDxzdHJpbmc+PiA9IChmdW5jdGlvbiogKCkge1xuICBjb25zdCBrZXlzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgIGNvbnN0IGtleSA9IGUua2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKCFrZXlzLmhhcyhrZXkpKSB7XG4gICAgICBrZXlzLmFkZChrZXkpO1xuICAgIH1cbiAgfSk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgKGUpID0+IHtcbiAgICBjb25zdCBrZXkgPSBlLmtleS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChrZXlzLmhhcyhrZXkpKSB7XG4gICAgICBrZXlzLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgfSk7XG4gIHdoaWxlICh0cnVlKSB7XG4gICAgeWllbGQga2V5cztcbiAgfVxufSkoKTtcblxuY29uc3QgZHRTdHJlYW06IEl0ZXJhdG9yPG51bWJlcj4gPSAoZnVuY3Rpb24qICgpIHtcbiAgbGV0IHByZXYgPSBEYXRlLm5vdygpO1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIGxldCBuZXh0ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBkdCA9IG5leHQgLSBwcmV2O1xuICAgIHByZXYgPSBuZXh0O1xuICAgIHlpZWxkIGR0O1xuICB9XG59KSgpO1xuXG4oZnVuY3Rpb24gbWFpbigpIHtcbiAgLy8gU1RBVEUgOmdyaW1hY2luZzpcbiAgbGV0IGJvYXJkID0gaW5pdCgpO1xuXG4gIGNvbnN0IHVwZGF0ZSA9IChlOiBNc2cpOiBNc2cgPT5cbiAgICBtb3ZlbWVudC5hZnRlck1vdXNlRG93bihcbiAgICAgIG1vdmVtZW50LmFmdGVyS2V5c1ByZXNzZWQoXG4gICAgICAgIGFmdGVyQ29sbGlzaW9ucyhhZnRlckJvdW5jaW5nKGFmdGVyVGltZVN0ZXAoZSkpKVxuICAgICAgKVxuICAgICk7XG5cbiAgY29uc3QgY2xpY2tTdHJlYW0gPSAoZnVuY3Rpb24qICgpIHtcbiAgICBjb25zdCBxdWV1ZTogQ2xpY2tbXSA9IFtdO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsICh7IG9mZnNldFg6IHgsIG9mZnNldFkgfSkgPT4ge1xuICAgICAgcXVldWUucHVzaCh7IHgsIHk6IGJvYXJkLmN0eC5jYW52YXMuaGVpZ2h0IC0gb2Zmc2V0WSB9KTtcbiAgICB9KTtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgeWllbGQgcXVldWUucG9wKCk7XG4gICAgfVxuICB9KSgpO1xuXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShhc3luYyBmdW5jdGlvbiBmcmFtZSgpIHtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgociwgXykgPT4gc2V0VGltZW91dChyLCAxMCkpO1xuXG4gICAgY29uc3QgbXNnOiBNc2cgPSB7XG4gICAgICBib2FyZCxcbiAgICAgIGR0OiBkdFN0cmVhbS5uZXh0KCkudmFsdWUsXG4gICAgICBrZXlzUHJlc3NlZDoga2V5c1ByZXNzZWRTdHJlYW0ubmV4dCgpLnZhbHVlLFxuICAgICAgY2xpY2s6IGNsaWNrU3RyZWFtLm5leHQoKS52YWx1ZSxcbiAgICB9O1xuICAgIGJvYXJkID0gdXBkYXRlKG1zZykuYm9hcmQ7XG4gICAgZGlzcGxheShib2FyZCk7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZyYW1lKTtcbiAgfSk7XG59KSgpO1xuXG5mdW5jdGlvbiBhZnRlckdyYXZpdHkoeyBkdCwgYm9hcmQsIC4uLm1zZyB9OiBNc2cpOiBNc2cge1xuICBjb25zdCBwcGwgPSBib2FyZC5lbnRpdGllcy5maWx0ZXIoKGUpID0+IGUuaWQpO1xuICBjb25zdCBidWxsZXRzID0gYm9hcmQuZW50aXRpZXMuZmlsdGVyKChlKSA9PiAhZS5pZCk7XG5cbiAgY29uc3QgZyA9IDAuMDAwOTgxO1xuXG4gIHJldHVybiB7XG4gICAgLi4ubXNnLFxuICAgIGR0LFxuICAgIGJvYXJkOiB7XG4gICAgICAuLi5ib2FyZCxcbiAgICAgIGVudGl0aWVzOiBbXG4gICAgICAgIC4uLnBwbCxcbiAgICAgICAgLi4uYnVsbGV0cy5tYXAoKGUpID0+ICh7XG4gICAgICAgICAgLi4uZSxcbiAgICAgICAgICB2eTogZS52eSAtIGcgKiBkdCxcbiAgICAgICAgfSkpLFxuICAgICAgXSxcbiAgICB9LFxuICB9O1xufVxuXG5mdW5jdGlvbiBhZnRlclRpbWVTdGVwKHsgZHQgPSAwLCBib2FyZCwgLi4ubXNnIH06IE1zZyk6IE1zZyB7XG4gIHJldHVybiB7XG4gICAgLi4ubXNnLFxuICAgIGR0LFxuICAgIGJvYXJkOiB7XG4gICAgICAuLi5ib2FyZCxcbiAgICAgIGVudGl0aWVzOiBib2FyZC5lbnRpdGllcy5tYXAoKGMpID0+ICh7XG4gICAgICAgIC4uLmMsXG4gICAgICAgIHg6IGMueCArIGMudnggKiBkdCxcbiAgICAgICAgeTogYy55ICsgYy52eSAqIGR0LFxuICAgICAgfSkpLFxuICAgIH0sXG4gIH07XG59XG5cbmZ1bmN0aW9uIGFmdGVyQ29sbGlzaW9ucyh7IGJvYXJkLCAuLi5tc2cgfTogTXNnKTogTXNnIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5tc2csXG4gICAgYm9hcmQ6IHtcbiAgICAgIC4uLmJvYXJkLFxuICAgICAgZW50aXRpZXM6IGJvYXJkLmVudGl0aWVzLmZpbHRlcigoYjEsIGkpID0+IHtcbiAgICAgICAgY29uc3QgY29sbGlzaW9ucyA9IGJvYXJkLmVudGl0aWVzLmZpbHRlcihcbiAgICAgICAgICAoYjIsIGopID0+XG4gICAgICAgICAgICBpICE9IGogJiZcbiAgICAgICAgICAgIE1hdGgucG93KGIxLnggLSBiMi54LCAyKSArIE1hdGgucG93KGIxLnkgLSBiMi55LCAyKSA8XG4gICAgICAgICAgICAgIE1hdGgucG93KGIxLnIgKyBiMi5yLCAyKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gY29sbGlzaW9ucy5sZW5ndGggPT0gMDtcbiAgICAgIH0pLFxuICAgIH0sXG4gIH07XG59XG5cbmZ1bmN0aW9uIGFmdGVyQm91bmNpbmcoeyBib2FyZCwgLi4ubXNnIH06IE1zZyk6IE1zZyB7XG4gIGNvbnN0IHsgd2lkdGg6IHcsIGhlaWdodDogaCB9ID0gYm9hcmQuY3R4LmNhbnZhcztcblxuICByZXR1cm4ge1xuICAgIC4uLm1zZyxcbiAgICBib2FyZDoge1xuICAgICAgLi4uYm9hcmQsXG4gICAgICBlbnRpdGllczogYm9hcmQuZW50aXRpZXMubWFwKCh7IHZ4LCB2eSwgLi4uYiB9KSA9PiAoe1xuICAgICAgICAuLi5iLFxuICAgICAgICB4OiBiLnggPCAwID8gMCA6IGIueCA+IHcgPyB3IDogYi54LFxuICAgICAgICB5OiBiLnkgPCAwID8gMCA6IGIueSA+IGggPyB3IDogYi55LFxuICAgICAgICB2eDogYi54IC0gYi5yIDwgMCA/IE1hdGguYWJzKHZ4KSA6IGIueCArIGIuciA+IHcgPyAtTWF0aC5hYnModngpIDogdngsXG4gICAgICAgIHZ5OiBiLnkgLSBiLnIgPCAwID8gTWF0aC5hYnModnkpIDogYi55ICsgYi5yID4gaCA/IC1NYXRoLmFicyh2eSkgOiB2eSxcbiAgICAgIH0pKSxcbiAgICB9LFxuICB9O1xufVxuXG5mdW5jdGlvbiBkaXNwbGF5KHM6IFN0YXRlKSB7XG4gIGNvbnN0IHsgaGVpZ2h0OiBoLCB3aWR0aDogdyB9ID0gcy5jdHguY2FudmFzO1xuICBzLmN0eC5jbGVhclJlY3QoMCwgMCwgdywgaCk7XG4gIHMuZW50aXRpZXMuZm9yRWFjaCgoYikgPT4ge1xuICAgIHMuY3R4LmJlZ2luUGF0aCgpO1xuICAgIHMuY3R4LmFyYyhiLngsIGggLSBiLnksIGIuciwgMCwgMiAqIE1hdGguUEkpO1xuICAgIHMuY3R4LmZpbGxTdHlsZSA9IGIuY29sb3I7XG4gICAgcy5jdHguZmlsbCgpO1xuICAgIHMuY3R4LmNsb3NlUGF0aCgpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaW5pdCgpOiBTdGF0ZSB7XG4gIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJjYW52YXNcIik7XG4gIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gIGNvbnN0IHsgd2lkdGg6IHcsIGhlaWdodDogaCB9ID0gY2FudmFzO1xuICBjb25zdCBwbGF5ZXJzOiBFbnRpdHlbXSA9IFtcbiAgICB7XG4gICAgICBpZDogMSxcbiAgICAgIHg6IE1hdGgucmFuZG9tKCkgKiB3LFxuICAgICAgeTogTWF0aC5yYW5kb20oKSAqIGgsXG4gICAgICByOiAxMCxcbiAgICAgIHZ4OiAwLFxuICAgICAgdnk6IDAsXG4gICAgICBjb2xvcjogXCJyZWRcIixcbiAgICB9LFxuICBdO1xuXG4gIHJldHVybiB7XG4gICAgY3R4LFxuICAgIGVudGl0aWVzOiBwbGF5ZXJzLFxuICB9O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==