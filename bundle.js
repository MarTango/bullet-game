!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);const r=function*(){const t=new Set;for(window.addEventListener("keydown",e=>{const n=e.key.toLowerCase();t.has(n)||t.add(n)}),window.addEventListener("keyup",e=>{const n=e.key.toLowerCase();t.has(n)&&t.delete(n)});;)yield t}(),o=function*(){let t=Date.now();for(;;){let e=Date.now();const n=e-t;t=e,yield n}}();!function(){let t=function(){const t=document.querySelector("canvas"),e=t.getContext("2d"),{width:n,height:r}=t,o=[{id:1,x:Math.random()*n,y:Math.random()*r,r:10,vx:0,vy:0,color:"red"}];return{ctx:e,entities:o}}();const e=t=>function({board:t,click:e,...n}){if(!e)return{...n,board:t};const{x:r,y:o}=e,i=t.entities.filter(t=>t.id).map(t=>{const e=r-t.x,n=o-t.y,i=Math.sqrt(e*e+n*n),a=e/i,c=n/i,s=t.r+2+2;return function(t,e,n,r){return{r:3,color:"black",x:t,y:e,vx:n,vy:r}}(t.x+s*a,t.y+s*c,.4*a,.4*c)});return{...n,click:e,board:{...t,entities:[...t.entities,...i]}}}(function({board:t,keysPressed:e,...n}){const r=.2,o={w:{vy:r},a:{vx:-r},s:{vy:-r},d:{vx:r}},i=Array.from(e).filter(t=>t in o),a=t.entities.filter(t=>t.id).map(t=>i.map(t=>o[t]).reduce((t,e)=>({...t,...e}),{...t,vx:0,vy:0}));return{board:{...t,entities:[...a,...t.entities.filter(t=>!t.id)]},keysPressed:e,...n}}(function({board:t,...e}){return{...e,board:{...t,entities:t.entities.filter((e,n)=>0==t.entities.filter((t,r)=>n!=r&&Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(e.r+t.r,2)).length)}}}(function({board:t,...e}){const{width:n,height:r}=t.ctx.canvas;return{...e,board:{...t,entities:t.entities.map(({vx:t,vy:e,...o})=>({...o,x:o.x<0?0:o.x>n?n:o.x,y:o.y<0?0:o.y>r?n:o.y,vx:o.x-o.r<0?Math.abs(t):o.x+o.r>n?-Math.abs(t):t,vy:o.y-o.r<0?Math.abs(e):o.y+o.r>r?-Math.abs(e):e}))}}}(function({dt:t=0,board:e,...n}){return{...n,dt:t,board:{...e,entities:e.entities.map(e=>({...e,x:e.x+e.vx*t,y:e.y+e.vy*t}))}}}(t))))),n=function(t){return function*(){const e=[];for(window.addEventListener("mousedown",({offsetX:n,offsetY:r})=>{e.push({x:n,y:t.ctx.canvas.height-r})});;)yield e.pop()}()}(t);requestAnimationFrame((async function i(){await new Promise((t,e)=>setTimeout(t,10));const a={board:t,dt:o.next().value,keysPressed:r.next().value,click:n.next().value};t=e(a).board,function(t){const{height:e,width:n}=t.ctx.canvas;t.ctx.clearRect(0,0,n,e),t.entities.forEach(n=>{t.ctx.beginPath(),t.ctx.arc(n.x,e-n.y,n.r,0,2*Math.PI),t.ctx.fillStyle=n.color,t.ctx.fill(),t.ctx.closePath()})}(t),requestAnimationFrame(i)}))}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0cmVhbXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy90cmFuc2Zvcm1hdGlvbnMudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJrZXlzUHJlc3NlZFN0cmVhbSIsImtleXMiLCJTZXQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRvTG93ZXJDYXNlIiwiaGFzIiwiYWRkIiwiZGVsZXRlIiwiZHRTdHJlYW0iLCJwcmV2IiwiRGF0ZSIsIm5vdyIsIm5leHQiLCJkdCIsImJvYXJkIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY3R4IiwiZ2V0Q29udGV4dCIsIndpZHRoIiwidyIsImhlaWdodCIsImgiLCJwbGF5ZXJzIiwiaWQiLCJ4IiwiTWF0aCIsInJhbmRvbSIsInkiLCJ2eCIsInZ5IiwiY29sb3IiLCJlbnRpdGllcyIsImluaXQiLCJ1cGRhdGUiLCJjbGljayIsIm1zZyIsIm14IiwibXkiLCJidWxsZXRzIiwiZmlsdGVyIiwibWFwIiwicmVseCIsInJlbHkiLCJtYWduaXR1ZGUiLCJzcXJ0IiwiQnVsbGV0IiwiYWZ0ZXJNb3VzZURvd24iLCJrZXlzUHJlc3NlZCIsInJlc3QiLCJ2IiwibWFwcGluZyIsImEiLCJBcnJheSIsImZyb20iLCJrIiwicmVkdWNlIiwiY3VyIiwiYWZ0ZXJLZXlzUHJlc3NlZCIsImIxIiwiYjIiLCJqIiwicG93IiwibGVuZ3RoIiwiYWZ0ZXJDb2xsaXNpb25zIiwiYiIsImFicyIsImFmdGVyQm91bmNpbmciLCJhZnRlclRpbWVTdGVwIiwiY2xpY2tTdHJlYW0iLCJxdWV1ZSIsIm9mZnNldFgiLCJvZmZzZXRZIiwicHVzaCIsInBvcCIsImdldENsaWNrU3RyZWFtIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYXN5bmMiLCJmcmFtZSIsIlByb21pc2UiLCJfIiwic2V0VGltZW91dCIsImNsZWFyUmVjdCIsImZvckVhY2giLCJiZWdpblBhdGgiLCJhcmMiLCJQSSIsImZpbGxTdHlsZSIsImZpbGwiLCJjbG9zZVBhdGgiLCJkaXNwbGF5Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFB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RzNEbUUsRURhRCxTQUF3QnhELEdBQzdCLE9BQU8sWUFDTCxNQUFNeUQsRUFBaUIsR0FJdkIsSUFIQXRFLE9BQU9DLGlCQUFpQixZQUFhLEVBQUdzRSxRQUFTOUMsRUFBRytDLGNBQ2xERixFQUFNRyxLQUFLLENBQUVoRCxJQUFHRyxFQUFHZixFQUFNSSxJQUFJSCxPQUFPTyxPQUFTbUQsY0FHdkNGLEVBQU1JLE1BTlQsR0NkYUMsQ0FBZTlELEdBRW5DK0QsdUJBQXNCQyxlQUFlQyxVQUM3QixJQUFJQyxRQUFRLENBQUNwRyxFQUFHcUcsSUFBTUMsV0FBV3RHLEVBQUcsS0FFMUMsTUFBTXlELEVBQVcsQ0FDZnZCLFFBQ0FELEdBQUlMLEVBQVNJLE9BQU83QixNQUNwQmtFLFlBQWFuRCxFQUFrQmMsT0FBTzdCLE1BQ3RDcUQsTUFBT2tDLEVBQVkxRCxPQUFPN0IsT0FFNUIrQixFQUFRcUIsRUFBT0UsR0FBS3ZCLE1BTXhCLFNBQWlCakIsR0FDZixNQUFReUIsT0FBUUMsRUFBR0gsTUFBT0MsR0FBTXhCLEVBQUVxQixJQUFJSCxPQUN0Q2xCLEVBQUVxQixJQUFJaUUsVUFBVSxFQUFHLEVBQUc5RCxFQUFHRSxHQUN6QjFCLEVBQUVvQyxTQUFTbUQsUUFBU2xCLElBQ2xCckUsRUFBRXFCLElBQUltRSxZQUNOeEYsRUFBRXFCLElBQUlvRSxJQUFJcEIsRUFBRXhDLEVBQUdILEVBQUkyQyxFQUFFckMsRUFBR3FDLEVBQUV0RixFQUFHLEVBQUcsRUFBSStDLEtBQUs0RCxJQUN6QzFGLEVBQUVxQixJQUFJc0UsVUFBWXRCLEVBQUVsQyxNQUNwQm5DLEVBQUVxQixJQUFJdUUsT0FDTjVGLEVBQUVxQixJQUFJd0UsY0FiTkMsQ0FBUTdFLEdBQ1IrRCxzQkFBc0JFLE1BckIxQiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBTdGF0ZSwgQ2xpY2sgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5leHBvcnQgY29uc3Qga2V5c1ByZXNzZWRTdHJlYW0gPSAoZnVuY3Rpb24qICgpIHtcbiAgY29uc3Qga2V5cyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcbiAgICBjb25zdCBrZXkgPSBlLmtleS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICgha2V5cy5oYXMoa2V5KSkge1xuICAgICAga2V5cy5hZGQoa2V5KTtcbiAgICB9XG4gIH0pO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIChlKSA9PiB7XG4gICAgY29uc3Qga2V5ID0gZS5rZXkudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoa2V5cy5oYXMoa2V5KSkge1xuICAgICAga2V5cy5kZWxldGUoa2V5KTtcbiAgICB9XG4gIH0pO1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIHlpZWxkIGtleXM7XG4gIH1cbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBkdFN0cmVhbSA9IChmdW5jdGlvbiogKCkge1xuICBsZXQgcHJldiA9IERhdGUubm93KCk7XG4gIHdoaWxlICh0cnVlKSB7XG4gICAgbGV0IG5leHQgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGR0ID0gbmV4dCAtIHByZXY7XG4gICAgcHJldiA9IG5leHQ7XG4gICAgeWllbGQgZHQ7XG4gIH1cbn0pKCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDbGlja1N0cmVhbShib2FyZDogU3RhdGUpIHtcbiAgcmV0dXJuIChmdW5jdGlvbiogKCkge1xuICAgIGNvbnN0IHF1ZXVlOiBDbGlja1tdID0gW107XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKHsgb2Zmc2V0WDogeCwgb2Zmc2V0WSB9KSA9PiB7XG4gICAgICBxdWV1ZS5wdXNoKHsgeCwgeTogYm9hcmQuY3R4LmNhbnZhcy5oZWlnaHQgLSBvZmZzZXRZIH0pO1xuICAgIH0pO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICB5aWVsZCBxdWV1ZS5wb3AoKTtcbiAgICB9XG4gIH0pKCk7XG59XG4iLCJpbXBvcnQgeyBrZXlzUHJlc3NlZFN0cmVhbSwgZHRTdHJlYW0sIGdldENsaWNrU3RyZWFtIH0gZnJvbSBcIi4vc3RyZWFtc1wiO1xuaW1wb3J0IHtcbiAgYWZ0ZXJCb3VuY2luZyxcbiAgYWZ0ZXJDb2xsaXNpb25zLFxuICBhZnRlclRpbWVTdGVwLFxuICBhZnRlcktleXNQcmVzc2VkLFxuICBhZnRlck1vdXNlRG93bixcbn0gZnJvbSBcIi4vdHJhbnNmb3JtYXRpb25zXCI7XG5pbXBvcnQgeyBFbnRpdHksIE1zZywgU3RhdGUgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG4oZnVuY3Rpb24gbWFpbigpIHtcbiAgbGV0IGJvYXJkID0gaW5pdCgpO1xuXG4gIGNvbnN0IHVwZGF0ZSA9IChlOiBNc2cpOiBNc2cgPT5cbiAgICBhZnRlck1vdXNlRG93bihcbiAgICAgIGFmdGVyS2V5c1ByZXNzZWQoYWZ0ZXJDb2xsaXNpb25zKGFmdGVyQm91bmNpbmcoYWZ0ZXJUaW1lU3RlcChlKSkpKVxuICAgICk7XG5cbiAgY29uc3QgY2xpY2tTdHJlYW0gPSBnZXRDbGlja1N0cmVhbShib2FyZCk7XG5cbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFzeW5jIGZ1bmN0aW9uIGZyYW1lKCkge1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyLCBfKSA9PiBzZXRUaW1lb3V0KHIsIDEwKSk7XG5cbiAgICBjb25zdCBtc2c6IE1zZyA9IHtcbiAgICAgIGJvYXJkLFxuICAgICAgZHQ6IGR0U3RyZWFtLm5leHQoKS52YWx1ZSxcbiAgICAgIGtleXNQcmVzc2VkOiBrZXlzUHJlc3NlZFN0cmVhbS5uZXh0KCkudmFsdWUsXG4gICAgICBjbGljazogY2xpY2tTdHJlYW0ubmV4dCgpLnZhbHVlLFxuICAgIH07XG4gICAgYm9hcmQgPSB1cGRhdGUobXNnKS5ib2FyZDtcbiAgICBkaXNwbGF5KGJvYXJkKTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnJhbWUpO1xuICB9KTtcbn0pKCk7XG5cbmZ1bmN0aW9uIGRpc3BsYXkoczogU3RhdGUpIHtcbiAgY29uc3QgeyBoZWlnaHQ6IGgsIHdpZHRoOiB3IH0gPSBzLmN0eC5jYW52YXM7XG4gIHMuY3R4LmNsZWFyUmVjdCgwLCAwLCB3LCBoKTtcbiAgcy5lbnRpdGllcy5mb3JFYWNoKChiKSA9PiB7XG4gICAgcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgcy5jdHguYXJjKGIueCwgaCAtIGIueSwgYi5yLCAwLCAyICogTWF0aC5QSSk7XG4gICAgcy5jdHguZmlsbFN0eWxlID0gYi5jb2xvcjtcbiAgICBzLmN0eC5maWxsKCk7XG4gICAgcy5jdHguY2xvc2VQYXRoKCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0KCk6IFN0YXRlIHtcbiAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImNhbnZhc1wiKTtcbiAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgY29uc3QgeyB3aWR0aDogdywgaGVpZ2h0OiBoIH0gPSBjYW52YXM7XG4gIGNvbnN0IHBsYXllcnM6IEVudGl0eVtdID0gW1xuICAgIHtcbiAgICAgIGlkOiAxLFxuICAgICAgeDogTWF0aC5yYW5kb20oKSAqIHcsXG4gICAgICB5OiBNYXRoLnJhbmRvbSgpICogaCxcbiAgICAgIHI6IDEwLFxuICAgICAgdng6IDAsXG4gICAgICB2eTogMCxcbiAgICAgIGNvbG9yOiBcInJlZFwiLFxuICAgIH0sXG4gIF07XG5cbiAgcmV0dXJuIHtcbiAgICBjdHgsXG4gICAgZW50aXRpZXM6IHBsYXllcnMsXG4gIH07XG59XG4iLCJpbXBvcnQgeyBNc2csIEVudGl0eSB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBhZnRlckdyYXZpdHkoeyBkdCwgYm9hcmQsIC4uLm1zZyB9OiBNc2cpOiBNc2cge1xuICBjb25zdCBwcGwgPSBib2FyZC5lbnRpdGllcy5maWx0ZXIoKGUpID0+IGUuaWQpO1xuICBjb25zdCBidWxsZXRzID0gYm9hcmQuZW50aXRpZXMuZmlsdGVyKChlKSA9PiAhZS5pZCk7XG5cbiAgY29uc3QgZyA9IDAuMDAwOTgxO1xuXG4gIHJldHVybiB7XG4gICAgLi4ubXNnLFxuICAgIGR0LFxuICAgIGJvYXJkOiB7XG4gICAgICAuLi5ib2FyZCxcbiAgICAgIGVudGl0aWVzOiBbXG4gICAgICAgIC4uLnBwbCxcbiAgICAgICAgLi4uYnVsbGV0cy5tYXAoKGUpID0+ICh7XG4gICAgICAgICAgLi4uZSxcbiAgICAgICAgICB2eTogZS52eSAtIGcgKiBkdCxcbiAgICAgICAgfSkpLFxuICAgICAgXSxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWZ0ZXJUaW1lU3RlcCh7IGR0ID0gMCwgYm9hcmQsIC4uLm1zZyB9OiBNc2cpOiBNc2cge1xuICByZXR1cm4ge1xuICAgIC4uLm1zZyxcbiAgICBkdCxcbiAgICBib2FyZDoge1xuICAgICAgLi4uYm9hcmQsXG4gICAgICBlbnRpdGllczogYm9hcmQuZW50aXRpZXMubWFwKChjKSA9PiAoe1xuICAgICAgICAuLi5jLFxuICAgICAgICB4OiBjLnggKyBjLnZ4ICogZHQsXG4gICAgICAgIHk6IGMueSArIGMudnkgKiBkdCxcbiAgICAgIH0pKSxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWZ0ZXJDb2xsaXNpb25zKHsgYm9hcmQsIC4uLm1zZyB9OiBNc2cpOiBNc2cge1xuICByZXR1cm4ge1xuICAgIC4uLm1zZyxcbiAgICBib2FyZDoge1xuICAgICAgLi4uYm9hcmQsXG4gICAgICBlbnRpdGllczogYm9hcmQuZW50aXRpZXMuZmlsdGVyKChiMSwgaSkgPT4ge1xuICAgICAgICBjb25zdCBjb2xsaXNpb25zID0gYm9hcmQuZW50aXRpZXMuZmlsdGVyKFxuICAgICAgICAgIChiMiwgaikgPT5cbiAgICAgICAgICAgIGkgIT0gaiAmJlxuICAgICAgICAgICAgTWF0aC5wb3coYjEueCAtIGIyLngsIDIpICsgTWF0aC5wb3coYjEueSAtIGIyLnksIDIpIDxcbiAgICAgICAgICAgICAgTWF0aC5wb3coYjEuciArIGIyLnIsIDIpXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBjb2xsaXNpb25zLmxlbmd0aCA9PSAwO1xuICAgICAgfSksXG4gICAgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFmdGVyQm91bmNpbmcoeyBib2FyZCwgLi4ubXNnIH06IE1zZyk6IE1zZyB7XG4gIGNvbnN0IHsgd2lkdGg6IHcsIGhlaWdodDogaCB9ID0gYm9hcmQuY3R4LmNhbnZhcztcblxuICByZXR1cm4ge1xuICAgIC4uLm1zZyxcbiAgICBib2FyZDoge1xuICAgICAgLi4uYm9hcmQsXG4gICAgICBlbnRpdGllczogYm9hcmQuZW50aXRpZXMubWFwKCh7IHZ4LCB2eSwgLi4uYiB9KSA9PiAoe1xuICAgICAgICAuLi5iLFxuICAgICAgICB4OiBiLnggPCAwID8gMCA6IGIueCA+IHcgPyB3IDogYi54LFxuICAgICAgICB5OiBiLnkgPCAwID8gMCA6IGIueSA+IGggPyB3IDogYi55LFxuICAgICAgICB2eDogYi54IC0gYi5yIDwgMCA/IE1hdGguYWJzKHZ4KSA6IGIueCArIGIuciA+IHcgPyAtTWF0aC5hYnModngpIDogdngsXG4gICAgICAgIHZ5OiBiLnkgLSBiLnIgPCAwID8gTWF0aC5hYnModnkpIDogYi55ICsgYi5yID4gaCA/IC1NYXRoLmFicyh2eSkgOiB2eSxcbiAgICAgIH0pKSxcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWZ0ZXJLZXlzUHJlc3NlZCh7IGJvYXJkLCBrZXlzUHJlc3NlZCwgLi4ucmVzdCB9OiBNc2cpOiBNc2cge1xuICBjb25zdCB2ID0gMC4yO1xuICBjb25zdCBtYXBwaW5nOiB7IFtzOiBzdHJpbmddOiBQYXJ0aWFsPEVudGl0eT4gfSA9IHtcbiAgICB3OiB7IHZ5OiB2IH0sXG4gICAgYTogeyB2eDogLXYgfSxcbiAgICBzOiB7IHZ5OiAtdiB9LFxuICAgIGQ6IHsgdng6IHYgfSxcbiAgfTtcblxuICAvLyBAdHMtaWdub3JlXG4gIGNvbnN0IGtleXM6IChrZXlvZiB0eXBlb2YgbWFwcGluZylbXSA9IEFycmF5LmZyb20oa2V5c1ByZXNzZWQpLmZpbHRlcihcbiAgICAoaykgPT4gayBpbiBtYXBwaW5nXG4gICk7XG4gIC8vIEB0cy1pZ25vcmVcbiAgY29uc3QgcGxheWVyczogRW50aXR5W10gPSBib2FyZC5lbnRpdGllc1xuICAgIC5maWx0ZXIoKGUpID0+IGUuaWQpXG4gICAgLm1hcCgocCkgPT5cbiAgICAgIGtleXNcbiAgICAgICAgLm1hcCgoaykgPT4gbWFwcGluZ1trXSlcbiAgICAgICAgLnJlZHVjZShcbiAgICAgICAgICAocHJldjogRW50aXR5LCBjdXIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgICAgIC4uLmN1cixcbiAgICAgICAgICAgIH0gYXMgRW50aXR5O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgeyAuLi5wLCB2eDogMCwgdnk6IDAgfVxuICAgICAgICApXG4gICAgKTtcblxuICByZXR1cm4ge1xuICAgIGJvYXJkOiB7XG4gICAgICAuLi5ib2FyZCxcbiAgICAgIGVudGl0aWVzOiBbLi4ucGxheWVycywgLi4uYm9hcmQuZW50aXRpZXMuZmlsdGVyKChlKSA9PiAhZS5pZCldLFxuICAgIH0sXG4gICAga2V5c1ByZXNzZWQsXG4gICAgLi4ucmVzdCxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFmdGVyTW91c2VEb3duKHsgYm9hcmQsIGNsaWNrLCAuLi5tc2cgfTogTXNnKTogTXNnIHtcbiAgaWYgKCFjbGljaykge1xuICAgIHJldHVybiB7IC4uLm1zZywgYm9hcmQgfTtcbiAgfVxuICBjb25zdCB7IHg6IG14LCB5OiBteSB9ID0gY2xpY2s7XG4gIGNvbnN0IHBsYXllcnMgPSBib2FyZC5lbnRpdGllcy5maWx0ZXIoKGUpID0+IGUuaWQpO1xuXG4gIGNvbnN0IGJ1bGxldHMgPSBwbGF5ZXJzLm1hcCgocCkgPT4ge1xuICAgIGNvbnN0IHJlbHggPSBteCAtIHAueDtcbiAgICBjb25zdCByZWx5ID0gbXkgLSBwLnk7XG4gICAgY29uc3QgbWFnbml0dWRlID0gTWF0aC5zcXJ0KHJlbHggKiByZWx4ICsgcmVseSAqIHJlbHkpO1xuXG4gICAgY29uc3QgdiA9IDAuNDtcbiAgICBjb25zdCB2eCA9IHJlbHggLyBtYWduaXR1ZGU7XG4gICAgY29uc3QgdnkgPSByZWx5IC8gbWFnbml0dWRlO1xuXG4gICAgY29uc3QgciA9IHAuciArIDIgKyAyO1xuXG4gICAgcmV0dXJuIEJ1bGxldChwLnggKyByICogdngsIHAueSArIHIgKiB2eSwgdiAqIHZ4LCB2ICogdnkpO1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIC4uLm1zZyxcbiAgICBjbGljayxcbiAgICBib2FyZDogeyAuLi5ib2FyZCwgZW50aXRpZXM6IFsuLi5ib2FyZC5lbnRpdGllcywgLi4uYnVsbGV0c10gfSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gQnVsbGV0KHg6IG51bWJlciwgeTogbnVtYmVyLCB2eDogbnVtYmVyLCB2eTogbnVtYmVyKTogRW50aXR5IHtcbiAgcmV0dXJuIHtcbiAgICByOiAzLFxuICAgIGNvbG9yOiBcImJsYWNrXCIsXG4gICAgeCxcbiAgICB5LFxuICAgIHZ4LFxuICAgIHZ5LFxuICB9O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==